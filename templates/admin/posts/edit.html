{% extends 'layouts/admin.html' %}

{% set title = "Редактирование новости – "~post.id %}
{% from "macros/form.html" import render_field %}

{% block content %}
<h3 class="pb-3 mb-3 border-bottom">
  <i class="fa-solid fa-newspaper"></i>
  <span>{{ title }}</span>
</h3>
<form method="POST">
  {{ form.csrf_token() }}
  <nav>
    <div class="nav nav-tabs mb-3" id="nav-tab" role="tablist">
      <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Главная</button>
      <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false" tabindex="-1">Дополнительно</button>
    </div>
  </nav>
  <div class="card">
    <div class="card-body">
      <div class="tab-content" id="nav-tabContent">
        <!-- Основной редактор -->
        <div class="tab-pane fade active show" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.title.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.title, base_class="form-control form-control-sm") }}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.excerpt.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.excerpt, base_class="form-control") }}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.content.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.content, base_class="form-control") }}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.status.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.status, base_class="form-select") }}
            </div>
          </div>
        </div>
        <!-- Дополнительный настройки -->
        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
          <div class="row">
            <div class="col-12 col-md-3">{{ form.slug.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.slug, base_class="form-control form-control-sm") }}
              <div id="{{ form.slug.name }}" class="form-text">{{ form.slug.description }}</div>
            </div>
          </div>
          <hr>
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.meta_title.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.meta_title, base_class="form-control form-control-sm") }}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.meta_description.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.meta_description, base_class="form-control form-control-sm") }}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12 col-md-3">{{ form.meta_keywords.label.text }}</div>
            <div class="col-12 col-md-9">
              {{ render_field(form.meta_keywords, base_class="form-control form-control-sm") }}
            </div>
          </div>
          <div class="alert alert-info" role="alert">
            <i class="fa-solid fa-circle-info"></i>
            <span>Метатеги для данной статьи могут быть добавлены вручную либо сгенерированы автоматически. Оставьте поля пустыми и метатеги будут сформированы автоматически.</span>
          </div>
        </div>
      </div>
      <button type="submit" class="btn btn-sm btn-primary">
        <i class="fa-solid fa-save"></i>
        <span>Сохранить изменения</span>
      </button>
    </div>
  </div>
</form>
{% endblock %}
{% block js %}
<script>
  sceditor.create(document.getElementById("{{ form.excerpt.name }}"), {
    format: 'xhtml',
    style: "{{ url_for('static', filename='sceditor/default.min.css') }}",
    locale: 'ru',
    emoticonsRoot: "/static/sceditor/"
  });
  sceditor.create(document.getElementById("{{ form.content.name }}"), {
    format: 'xhtml',
    style: "{{ url_for('static', filename='sceditor/default.min.css') }}",
    locale: 'ru',
    emoticonsRoot: "/static/sceditor/"
  });
</script>
{% endblock %}